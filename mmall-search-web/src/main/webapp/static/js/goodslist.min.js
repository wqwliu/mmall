!function(e){function t(i){if(a[i])return a[i].exports;var o=a[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){e.exports=a(1)},function(e,t,a){a(2),a(3),a(6),function(e){function t(a){var i,o,s=a;return 0===s.length?s:s.length>1?(s.each(function(){t(e(this))}),s):(s.addClass("filter-list-row-"+Math.ceil(s.find("dd").length/6)),i=s.closest(".filter-list-wrap"),o=e('<a class="more J_filterToggle" href="javascript: void(0);">更多<i class="iconfont">&#xe61c;</i></a>').appendTo(i),void o.on("click",function(){i.toggleClass("filter-list-wrap-toggled")}))}function a(){"string"==typeof SEARCH_WORDS&&(e("#search").val(e("<div>").html(SEARCH_WORDS).text()),e("#J_searchForm").find(".search-hot-words").hide())}var i=e(".filter-list"),o=e(".filter-list-wrap"),s=e(".J_filterListToggle"),n=e(".thumb-list");a(),t(i.filter(function(){return e(this).find("> dd").length>6})),s.on("click",function(t){t.preventDefault(),e(this).hasClass("toggled")?(e(this).removeClass("toggled"),o.filter(function(e){return e>2}).addClass("hide")):(e(this).addClass("toggled"),o.removeClass("hide"))}),n.filter(function(){return e(this).find("> li").length>5}).carousel({itemPerSlide:5,containerSelector:".thumbs",speed:200,controlsClass:"xm-controls-small",easing:"linear"}),n.filter(function(){return e(this).find("> li").length>1}).find("> li").on("mouseenter",function(){var t=e(this),a=t.closest(".goods-item, .goods-detail-item"),i=a.find(".J_likeGoods"),o=t.data("config"),s="";t.addClass("active").siblings().removeClass("active"),"0"!==o.discount&&(s+='<div class="flag flag-saleoff">'+o.discount+"折促销</div>"),o.postfree&&(s+='<div class="flag flag-postfree">'+(2===o.postfreenum?"2件":"")+"包邮</div>"),o.hasgift&&(s+='<div class="flag flag-gift">有赠品</div>'),o["new"]&&(s+='<div class="flag flag-new">新品上架</div>');var n=o.cfrom||"list";a.find(".price").html(o.price).end().find(".figure-img img").attr("src",e(this).find("img").attr("src").replace("34x34","200x200")).end().find(".figure-img a, .title a").attr("href",MI.GLOBAL_CONFIG.itemSite+"/"+o.cid+".html?cfrom="+n).end().find(".flags").html(s),o["is-cos"]?a.find(".J_buyGoods").addClass("btn-buy-detail").attr("href",MI.GLOBAL_CONFIG.orderSite+"/misc/subscribe/goods/"+o.gid).html('<span>到货提醒</span> <i class="iconfont">&#xe606;</i>'):o["package"]?a.find(".J_buyGoods").addClass("btn-buy-detail").attr("href",MI.GLOBAL_CONFIG.itemSite+"/"+o.cid+".html?cfrom=list").html('<span>查看详情</span> <i class="iconfont">&#xe60a;</i>'):a.find(".J_buyGoods").removeClass("btn-buy-detail").attr({href:MI.GLOBAL_CONFIG.cartSite+"/cart/add/"+o.gid+"-0-1","data-gid":o.gid}).html('<span>加入购物车</span> <i class="iconfont">&#xe60a;</i>'),i.attr("data-cid",o.cid),"1"===t.attr("data-liked")?i.addClass("btn-liked").find(".iconfont").html("&#xe62e;"):i.removeClass("btn-liked").find(".iconfont").html("&#xe62d;")}),e(".J_likeGoods").on("click",function(t){function a(t,a){var i;if("add"===a)i=MI.GLOBAL_CONFIG.orderSite+"/favorite/add/id/"+s;else{if("drop"!==a)return!1;i=MI.GLOBAL_CONFIG.orderSite+"/favorite/drop/id/"+s}e.ajax({type:"GET",url:i,dataType:"jsonp",jsonp:"jsonpcallback",success:function(e){t.removeClass("disable"),1===e.code?"add"===a?(t.addClass("btn-liked").find(".iconfont").html("&#xe62e;"),o.find('.thumb-list > [data-cid="'+s+'"]').attr("data-liked",1)):(t.removeClass("btn-liked").find(".iconfont").html("&#xe62d;"),o.find('.thumb-list > [data-cid="'+s+'"]').attr("data-liked",0)):alert(e.msg)}})}var i=e(this),o=i.closest(".goods-item, .goods-detail-item"),s=i.attr("data-cid");return t.preventDefault(),i.hasClass("disable")?!1:(i.addClass("disable"),void(i.hasClass("btn-liked")?a(i,"drop"):a(i,"add")))}),e(".J_buyGoods").on("click",function(t){var a=e(this),i=a.closest(".goods-item, .goods-detail-item");return a.hasClass("disabled")?!1:void(a.hasClass("btn-buy-detail")||(t.preventDefault(),MI.addShopCart(a.attr("data-gid"),function(e){function t(){i.removeClass("goods-item-notice"),setTimeout(function(){a.removeClass("disabled"),i.find(".notice").empty()},500)}1===e.code?(i.addClass("goods-item-notice").find(".notice").empty().append('<a class="btn btn-block btn-green btn-notice" href="javascript: void(0);">成功加入购物车</a>'),i.find(".btn-notice").one("click",t),setTimeout(function(){t()},1e3)):(a.removeClass("disabled"),alert(e.msg))})))}),e("#J_renovateWrap").miRecommend({type:"searchHistoryRecommend"}),"undefined"!=typeof SEARCH_WORDS&&SEARCH_WORDS&&e.cookie("miwd",SEARCH_WORDS,{domain:"mi.com",path:"/",expires:parseFloat((1/48).toFixed(2))})}(jQuery)},function(e,t){!function(e){function t(t){function a(){return 0>=b?!1:(x&&clearInterval(x),void(x=setTimeout(function(){var e=C===b-1?0:C+1;i(e),a()},p.pause)))}function i(e){return C===e?!1:(_.css({marginLeft:-h*g*e,transition:"margin-left "+p.speed/1e3+"s "+p.easing}),p.controls&&(0===e?d.addClass("control-disabled"):d.removeClass("control-disabled"),e===b-1?m.addClass("control-disabled"):m.removeClass("control-disabled")),p.pager&&u.find("li").eq(e).addClass("pager-active").siblings().removeClass("pager-active"),void(C=e))}function o(){for(var t='<ul class="xm-pagers">',a=0,o=b;o>a;a+=1)t+='<li class="pager'+(0===a?" pager-active":"")+'"><span class="dot">'+(a+1)+"</span></li>";t+="</ul>",u.html(t),u.find("li").off(".carousel").on("click.carousel",function(){e(this).addClass("pager-active").siblings().removeClass("pager-active"),i(u.find("li").index(e(this)))})}function s(){g=p.itemPerSlide||Math.ceil(r.width()/h),b=Math.ceil(l.length/g),1>=b||(i(0),p.pager&&o(),p.auto&&(a(),p.controls&&c.find(".control").off(".carousel").on({"mouseenter.carousel":function(){x&&clearTimeout(x)},"mouseleave.carousel":function(){a()}}),p.pager&&u.find(".pager").off(".carousel").on({"mouseenter.carousel":function(){x&&clearTimeout(x)},"mouseleave.carousel":function(){a()}})))}var n,r,l,c,d,m,u,f,p,g,h,v,b,_=e(this),x=0,C=-1;return f={itemSelector:"> li",itemWidth:null,itemHeight:null,itemPerSlide:null,containerSelector:null,controlsSelector:null,pagersSelector:null,speed:500,easing:"ease",auto:!1,pause:5e3,controls:!0,controlsClass:"xm-controls-line-small",pager:!1,onLoad:e.noop},p=e.extend({},f,t),l=_.find(p.itemSelector),p.itemPerSlide&&l.length<=p.itemPerSlide?this:(h=p.itemWidth||l.outerWidth(!0),v=p.itemHeight||l.outerHeight(),n=p.containerSelector?_.closest(p.containerSelector):_.parent(),n.addClass("xm-carousel-container"),r=_.wrap('<div class="xm-carousel-wrapper"></div>').closest(".xm-carousel-wrapper").css({height:v,overflow:"hidden"}),_.css("width",h*l.length),p.controls&&(c=e('<div class="xm-controls '+p.controlsClass+' xm-carousel-controls"><a class="control control-prev iconfont" href="javascript: void(0);">&#xe628;</a><a class="control control-next iconfont" href="javascript: void(0);">&#xe623;</a></div>'),p.controlsSelector?n.find(p.controlsSelector).append(c):c.insertAfter(r),d=c.find(".control-prev"),m=c.find(".control-next"),d.on("click",function(t){t.preventDefault(),e(this).hasClass("control-disabled")||i(C-1)}),m.on("click",function(t){t.preventDefault(),e(this).hasClass("control-disabled")||i(C+1)})),p.pager&&(u=e('<div class="xm-pagers-wrapper"></div>'),p.pagersSelector?n.find(p.pagersSelector).append(u):u.insertAfter(r)),s(),p.onLoad(_),void e(window).on("resize",s))}e.fn.carousel=function(e){return this.each(function(){t.call(this,e)}),this}}(jQuery)},function(e,t,a){function i(e,t,a){var i=e.find("a");$.each(i,function(e,i){var o,s=$(i).attr("data-stat-index"),n=r($(i).attr("data-stat-text")),l=$(i).attr("data-stat-method"),c=$(i).attr("data-stat-addcart");o=c?"stat_"+t+c+"."+a+"_"+s+"_"+l:"stat_"+t+"."+a+"_"+s+"_"+l,$(i).attr({"data-stat-pid":o,"data-stat-aid":n})})}function o(e){if("cart"!==n.page&&n.useCarousel){var t=e.find("ul").eq(0);t&&t.carousel({containerSelector:e,controls:n.carouselControl,pager:n.carouselPage,itemHeight:320})}n.isBuy&&($(".J_xm-recommend-list").hover(function(){$(this).find(".J_xm-recommend-btn").show()},function(){$(this).find(".J_xm-recommend-btn").hide()}),$(".J_xm-recommend-btn").off(".addcart").on("click.addcart",function(){function e(){a.removeClass("xm-recommend-notice-active"),setTimeout(function(){t.removeClass("disabled"),a.empty()},500)}var t=$(this),a=t.parent().siblings(".xm-recommend-notice");return t.hasClass("disabled")?!1:(MI.addShopCart(t.attr("data-stat-gid"),function(t){1===t.code?"cart"!==n.page?(a.addClass("xm-recommend-notice-active").empty().append('<a class="btn btn-block btn-green btn-notice" href="javascript: void(0);">成功加入购物车</a>'),a.find(".btn-notice").one("click",e),setTimeout(function(){e(),location.reload()},1e3)):location.href=MI.GLOBAL_CONFIG.staticSite+"/cart/":alert(t.msg)}),!1)})),i(e,n.page,n.pageName),$.isFunction($("body").linkSign)&&e.linkSign({live:!0});var a=e.attr("id"),o="re-"+n.page+"."+n.tips;$.force_appear(),e.appear(),e.one("appear",function(){if("undefined"!=typeof _msq&&_msq.push(["trackPanelShow",a,o]),!e.data("log_codes")){for(var t=e.find(".J_xm-recommend-list").find("dt").find("a"),i="",s=0,n=t.length;n>s;s++)i+=t.eq(s).data("log_code")+";";e.attr("data-log_codes",i.substring(0,i.length-1))}})}a(2),a(4);var s={},n={},r=function(e){try{return e.replace(/\s/g,"")}catch(t){return e}};!function(e){function t(e,t,i,s){if(e.length<5)return!1;var r=a(5),l={v:1,data:e,useCarousel:n.useCarousel,isBuy:n.isBuy,itemSite:MI.GLOBAL_CONFIG.itemSite,title:s?"买购物车中商品的人还看了":n.title,page:n.page,hideTitle:n.hideTitle,type:t.type};i.addClass("container").html(r(l)),o(i),null!==t.callback&&"function"==typeof t.callback&&t.callback()}function i(e){return e.length<5?!1:(e.length>20&&(e=e.slice(0,20)),e.length>15&&e.length<20&&(e=e.slice(0,15)),e.length>10&&e.length<15&&(e=e.slice(0,10)),e.length>5&&e.length<10&&(e=e.slice(0,5)),e)}function r(a){var o=n.api,r={cid:s.gid};e.ajax({url:o,dataType:"jsonp",jsonp:"jsonpcallback",cache:!0,data:r,success:function(o){if(0===o.code){o=o.data||{};var n=e(a);"buyRecommend"===s.type||"paySuccess"===s.type?(t(i(o.alsobuy),s,n),s.type="dirHistoryRecommend",n=e("#J_historyRecommend"),t(i(o.alsoview),s,n,!0)):t(i(o),s,n)}}})}var l={recommendBox:{api:"//rec.www.mi.com/rec/cartbuy",title:"买购物车中商品的人还买了",isBuy:!0,page:"Cart",pageName:"购物车",tips:"购物车推荐",useCarousel:!1},historyRecommend:{api:"//rec.www.mi.com/rec/cartempty",title:"为您推荐",isBuy:!0,page:"Cart",pageName:"购物车",tips:"猜你喜欢",useCarousel:!1},dirHistoryRecommend:{api:"//rec.www.mi.com/rec/cartsuccess",title:"根据浏览向您推荐",isBuy:!0,page:"CartSuc",pageName:"加购成功",tips:"看了还看",useCarousel:!1},alsoBuy:{api:"//rec.www.mi.com/rec/detail",title:"买过该商品的人还买了",isBuy:!0,page:"ItemTail",pageName:"单品页底部",tips:"买过该商品的人还买了",useCarousel:!0,carouselControl:!1,carouselPage:!0},buyRecommend:{api:"//rec.www.mi.com/rec/cartsuccess",title:"买购物车中商品的人还买了",isBuy:!0,page:"CartSuc",pageName:"加购成功",tips:"买过该商品的人还买了",useCarousel:!0,carouselControl:!1,carouselPage:!0},searchHistoryRecommend:{api:"//rec.www.mi.com/rec/search",title:"您还看了",isBuy:!0,page:"Search",pageName:"搜索页",tips:"您还看了",useCarousel:!0,carouselControl:!1,carouselPage:!0},homeRecommend:{api:"//rec.www.mi.com/rec/guesslike",title:"为你推荐",isBuy:!1,page:"Home",pageName:"首页",tips:"为你推荐",useCarousel:!0,carouselControl:!0,carouselPage:!1,hideTitle:!0},paySuccess:{api:"//rec.www.mi.com/rec/cartsuccess",title:"为你推荐",isBuy:!0,page:"CartSuc",pageName:"支付成功",tips:"为你推荐",useCarousel:!0,carouselControl:!1,carouselPage:!0}};e.fn.miRecommend=function(t){s=e.extend(l,t),n=s[s.type],r(this)}}(jQuery)},function(e,t){!function(e){function t(){s=!1;for(var t=0,o=i.length;o>t;t++){var n=e(i[t]).filter(function(){return e(this).is(":appeared")});if(n.trigger("appear",[n]),a){var r=a.not(n);r.trigger("disappear",[r])}a=n}}var a,i=[],o=!1,s=!1,n={interval:250,force_process:!1},r=e(window);e.expr[":"].appeared=function(t){var a=e(t);if(!a.is(":visible"))return!1;var i=r.scrollLeft(),o=r.scrollTop(),s=a.offset(),n=s.left,l=s.top;return l+a.height()>=o&&l-(a.data("appear-top-offset")||0)<=o+r.height()&&n+a.width()>=i&&n-(a.data("appear-left-offset")||0)<=i+r.width()?!0:!1},e.fn.extend({appear:function(a){var r=e.extend({},n,a||{}),l=this.selector||this;if(!o){var c=function(){s||(s=!0,setTimeout(t,r.interval))};e(window).scroll(c).resize(c),o=!0}return r.force_process&&setTimeout(t,r.interval),i.push(l),e(l)}}),e.extend({force_appear:function(){return o?(t(),!0):!1}})}(jQuery)},function(e,t){e.exports=function(e){var t="";e.title&&!e.hideTitle&&(t+='<h2 class="xm-recommend-title"><span>'+e.title+"</span></h2>"),t+='<div class="xm-recommend"> ',t+=e.useCarousel?' <ul class="xm-carousel-col-5-list xm-carousel-list clearfix"> ':' <ul class="row clearfix"> ';var a=e.data;if(a)for(var i,o=-1,s=a.length-1;s>o;){i=a[o+=1],t+=" ",t+=e.useCarousel?' <li class="J_xm-recommend-list"> ':' <li class="J_xm-recommend-list span4"> ',t+=" ";var n=/.jpg|.jpeg|.png/,r=n.exec(i.image),l="!140x140"+r,c="!280x280"+r;if(t+=" ",i.ext&&i.ext.img&&i.ext.url){t+=" ";var n=/.jpg|.jpeg|.png/,d=n.exec(i.ext.img),m="!234x300"+d,u="!468x600"+d;t+=' <a target="_blank" href="'+i.ext.url+'" data-log_code="'+i.logcode+'" data-stat-method="'+e.v+"_"+i.algorithm+'" data-stat-index='+o+' data-stat-text="'+i.name+'"> <img src="'+i.ext.img.replace(/.jpg|.png|.jpeg/,m)+'" srcset="'+i.ext.img.replace(/.jpg|.png|.jpeg/,u)+'  2x" alt="'+i.name+'" /> </a> '}else t+=' <dl> <dt> <a href="'+e.itemSite+"/"+i.commodityid+'.html" data-log_code="'+i.logcode+'" data-stat-method="'+e.v+"_"+i.algorithm+'" data-stat-index='+o+' data-stat-text="'+i.name+'" target="_blank"> <img src="'+i.image.replace(/.jpg|.png|.jpeg/,l)+'" srcset="'+i.image.replace(/.jpg|.png|.jpeg/,c)+'  2x" alt="'+i.name+'" /> </a> </dt> <dd class="xm-recommend-name"> <a href="'+e.itemSite+"/"+i.commodityid+'.html" data-log_code="'+i.logcode+'" data-stat-method="'+e.v+"_"+i.algorithm+'" data-stat-index='+o+' target="_blank"> '+i.name+' </a> </dd> <dd class="xm-recommend-price">'+i.price+'元</dd> <dd class="xm-recommend-tips"> ',i.comments&&(t+=" ",parseInt(i.comments)>0&&(t+=" "+i.comments+"人好评 "),t+=" "),t+=" ",e.isBuy&&(t+=' <a href="'+e.itemSite+"/cart/add/"+i.goodsid+'-0-1" data-log_code="'+i.logcode+'" data-stat-gid="'+i.goodsid+'" data-stat-method="'+e.v+"_"+i.algorithm+'" data-stat-index='+o+' data-stat-text="'+i.name+'" data-stat-addcart="加购" class="btn btn-small btn-line-primary J_xm-recommend-btn">加入购物车</a> '),t+=' </dd> <dd class="xm-recommend-notice"></dd> </dl> ';t+=" </li>"}return t+="</ul></div>"}},function(e,t){MI.namespace("xmHongbao"),MI.xmHongbao=function(){function e(e){e&&$.each(e,function(e,t){return t?void $('.J_tempItem[data-key="'+e+'"]').html(t):!0})}function t(){$.ajax({url:l,dataType:"jsonp",jsonp:"jsonpcallback",timeout:1e4,error:function(){},success:function(e){if(e&&0===e.code){m=e.data;var t="";m.succ_message_title&&m.succ_message_subtitle?t="<h3>"+m.succ_message_title+"</h3>"+m.succ_message_subtitle:m.succ_message_subtitle&&(t=m.succ_message_subtitle),a({msg:t},m.relative_activity?m.relative_activity:"default")}}})}function a(t,a){t&&($("#J_modalHongbao").remove(),$("body").append(u),e(t),$("#J_modalHongbao").addClass("modal-hongbao-"+a).modal({show:!0,backdrop:"static"}),$("#J_hongbaoOpen").one("click",function(){var e=$(this).hasClass("active"),t=""===document.createElement("a").style.animation?!0:!1;if(!e){if(!d)return void(location.href=c);$(this).addClass("active"),t?setTimeout(o,1e3):o()}}))}function i(e){var t="";return e&&e.length?($.each(e,function(e,a){a.pc_path&&a.pc_img_url&&(t+='<a target="_blank" href="'+a.pc_path+'" class="item"><img src="'+a.pc_img_url+'"></a>')}),t):t}function o(){$.ajax({url:r,dataType:"jsonp",jsonp:"jsonpcallback",data:{code:m.activity_code},timeout:1e4,error:function(){$("#J_modalHongbao").modal("hide"),MI.alert({msg:"抱歉！网络错误，请刷新重试！"})},success:function(e){e&&0===e.code?s(e.data.result?{title:e.data.award_name,desc:e.data.award_description,ad:e.data.ads.length?i(e.data.ads):"",win:!0}:{title:e.data.fail_message_title,desc:e.data.fail_message_subtitle,ad:e.data.ads.length?i(e.data.ads):"",win:!1}):-1===e.code?location.href=c:-2===e.code&&($("#J_modalHongbao").modal("hide"),MI.alert({msg:"抱歉！网络错误，请刷新重试！"}))}})}function s(t){$("#J_modalHongbao").modal("hide"),$("#J_modalHongbaoResult").remove(),$("body").append(f),e(t),$("#J_modalHongbaoResult").modal("show").find(".modal-body").addClass(t.win?"win":"")}function n(){t()}if("undefined"!=typeof HongBaoHost&&HongBaoHost){var r=HongBaoHost+"/redbag/default/draw",l=HongBaoHost+"/redbag/default/redbag",c=HongBaoHost+"/site/login?redirectUrl="+location.href,d=$.cookie("cUserId")||$.cookie("userId")?!0:!1,m={},u=multiline(function(){/*!@tpl
	<div class="modal modal-hongbao fade modal-hide" id="J_modalHongbao">
	    <div class="modal-body">
	        <a href="javascript:void(0);" class="open-btn" id="J_hongbaoOpen">开红包</a>
	        <div class="msg J_tempItem" data-key="msg"></div>
	    </div>
	</div>
	  */
console.log()}),f=multiline(function(){/*!@tpl
	<div class="modal modal-hongbao-result fade modal-hide" id="J_modalHongbaoResult">
	    <a class="close" data-dismiss="modal"><i class="iconfont">&#xe602;</i></a>
	    <div class="modal-body">
	        <div class="info-box">
	            <h3 class="title J_tempItem" data-key="title"></h3>
	            <p class="desc J_tempItem" data-key="desc"></p>
	        </div>
	        <div class="goods-list J_tempItem" data-key="ad"></div>
	    </div>
	</div>
	  */
console.log()});n()}},$(document).ready(function(){MI.xmHongbao()})}]);